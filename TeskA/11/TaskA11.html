<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="jquery-3.6.3.min.js"></script>
    <title>Document</title>
</head>
<style>
    .all{
        position: absolute;
        display: grid;
        grid-template-columns: repeat(7,10px);
        grid-template-rows: repeat(7,10px);
        height: 70px;
        width: 70px;
        border: 1px solid black;
        border-radius: 50%;
        overflow: hidden;
    }
    .in{
        height: 10px;
        width: 10px;
        border: 1px solid black;
    }
</style>
<body>
    <canvas id="canvas" height="400" width="700"></canvas>
    <div style="height: 60px;width: 60px;" class="color"></div>
    <span></span><br>
    <div class="all">
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
        <div class="in"></div>
    </div>
</body>
<script>
    let img=new Image();
    img.addEventListener('load',function(){
        $("#canvas")[0].getContext('2d').drawImage(img,0,0,img.width,img.height,0,0,$("#canvas")[0].width,$("#canvas")[0].height);
    });
    img.setAttribute('src','1.jpg');
    $("#canvas")[0].addEventListener('mousemove',function(e){
        let context=this.getContext('2d');
        let pos=$("#canvas").position();
        let posX=e.pageX-pos.left;
        let posY=e.pageY-pos.top;
        let imagedata=context.getImageData(posX,posY,1,1).data;
        $(".color").css('background','rgb('+imagedata[0]+','+imagedata[1]+','+imagedata[2]+')');
        $(".in:eq(24)").css('background','rgb('+imagedata[0]+','+imagedata[1]+','+imagedata[2]+')');
        $('span').text('rgb('+imagedata[0]+','+imagedata[1]+','+imagedata[2]+')');
        let arnum=0;
        for(let i=-3;i<4;i++){
            for(let j=-3;j<4;j++){
                let imagedatain=context.getImageData(posX+j,posY+i,1,1).data;
                $(".in:eq("+arnum+")").css('background','rgb('+imagedatain[0]+','+imagedatain[1]+','+imagedatain[2]+')');
                arnum++;
            }
        }
        let topx=posX-28;
        let topy=posY-28;
        $(".all").css('left',topx);
        $(".all").css('top',topy);
        // console.log(imagedata)
    });
</script>
</html>